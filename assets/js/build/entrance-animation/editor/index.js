(()=>{"use strict";const e=window.React,n=window.wp.i18n,t=window.wp.hooks,a=window.wp.compose,l=window.wp.blocks,o=window.wp.data,i=e=>e.startsWith("premium/"),r={animation:{Desktop:"",Tablet:"",Mobile:""},duration:"1000",delay:"",curve:"linear"},c=window.wp.components,s=pbg.components,u=({value:t,onChange:a,deviceType:l})=>{const{animation:o,duration:i,delay:r,curve:u}=t,b=e=>{const n={...t,...e};a(n)};return(0,e.createElement)(c.PanelBody,{title:(0,n.__)("Entrance Animation","premium-blocks-for-gutenberg"),className:"premium-panel-body",initialOpen:!1},(0,e.createElement)(s.ResponsiveSelectControl,{value:o,label:(0,n.__)("Animation","premium-blocks-for-gutenberg"),options:[{label:"None",value:""},{label:"Fading",options:[{label:"Fade In",value:"pbg-fade-in"},{label:"Fade In Down",value:"pbg-fade-in-down"},{label:"Fade In Left",value:"pbg-fade-in-left"},{label:"Fade In Right",value:"pbg-fade-in-right"},{label:"Fade In Up",value:"pbg-fade-in-up"}]},{label:"Zooming",options:[{label:"Zoom In",value:"pbg-zoom-in"},{label:"Zoom In Down",value:"pbg-zoom-in-down"},{label:"Zoom In Left",value:"pbg-zoom-in-left"},{label:"Zoom In Right",value:"pbg-zoom-in-right"},{label:"Zoom In Up",value:"pbg-zoom-in-up"}]},{label:"Bouncing",options:[{label:"Bounce In",value:"pbg-bounce-in"},{label:"Bounce In Down",value:"pbg-bounce-in-down"},{label:"Bounce In Left",value:"pbg-bounce-in-left"},{label:"Bounce In Right",value:"pbg-bounce-in-right"},{label:"Bounce In Up",value:"pbg-bounce-in-up"}]},{label:"Sliding",options:[{label:"Slide In Down",value:"pbg-slide-in-down"},{label:"Slide In Left",value:"pbg-slide-in-left"},{label:"Slide In Right",value:"pbg-slide-in-right"},{label:"Slide In Up",value:"pbg-slide-in-up"}]},{label:"Rotating",options:[{label:"Rotate In",value:"pbg-rotate-in"},{label:"Rotate In Down Left",value:"pbg-rotate-in-down-left"},{label:"Rotate In Down Right",value:"pbg-rotate-in-down-right"},{label:"Rotate In Up Left",value:"pbg-rotate-in-up-left"},{label:"Rotate In Up Right",value:"pbg-rotate-in-up-right"}]},{label:"Attention Seekers",options:[{label:"Bounce",value:"pbg-bounce"},{label:"Flash",value:"pbg-flash"},{label:"Pulse",value:"pbg-pulse"},{label:"Rubber Band",value:"pbg-rubber-band"},{label:"Shake",value:"pbg-shake"},{label:"Head Shake",value:"pbg-head-shake"},{label:"Swing",value:"pbg-swing"},{label:"Tada",value:"pbg-tada"},{label:"Wobble",value:"pbg-wobble"},{label:"Jello",value:"pbg-jello"}]},{label:"Light Speed",options:[{label:"Light Speed In",value:"pbg-light-speed-in"}]},{label:"Specials",options:[{label:"Roll In",value:"pbg-roll-in"}]}],onChange:e=>b({animation:e})}),o?.[l]&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(c.SelectControl,{label:(0,n.__)("Easing","premium-blocks-for-gutenberg"),value:u,onChange:e=>b({curve:e}),options:[{value:"ease-in-out",label:"ease-in-out"},{value:"ease",label:"ease"},{value:"ease-in",label:"ease-in"},{value:"ease-out",label:"ease-out"},{value:"linear",label:"linear"}]}),(0,e.createElement)(s.ResponsiveSingleRangeControl,{label:(0,n.__)("Duration","premium-blocks-for-gutenberg"),value:i,onChange:e=>b({duration:e}),showUnit:!1,defaultValue:0,max:1e4,step:1}),(0,e.createElement)(s.ResponsiveSingleRangeControl,{label:(0,n.__)("Delay","premium-blocks-for-gutenberg"),value:r,onChange:e=>b({delay:e}),showUnit:!1,defaultValue:0,max:1e4,step:1})))},b=(0,a.createHigherOrderComponent)((n=>t=>{const{attributes:a,setAttributes:l}=t,{entranceAnimation:i={}}=a,r=(0,o.useSelect)((e=>{const{__experimentalGetPreviewDeviceType:n=null}=e("core/edit-post");return n?n():"Desktop"}),[]);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n,{...t}),(0,e.createElement)(s.PBGAdvancedInspectorControls,null,(0,e.createElement)(u,{value:i,onChange:e=>l({entranceAnimation:e}),deviceType:r})))}));(0,t.addFilter)("Pbg.AdvancedTab","pbg/entrance-animation-option",b,10);const m=(0,a.createHigherOrderComponent)((n=>t=>{const{attributes:a,setAttributes:l,isSelected:i}=t.blockProps,{entranceAnimation:r={},blockId:c}=a,s=(0,o.useSelect)((e=>{const{__experimentalGetPreviewDeviceType:n=null}=e("core/edit-post");return n?n():"Desktop"}),[]),u=e=>{e&&(e.style.animationTimingFunction=r.curve,e.style.animationDuration=r.duration?`${r.duration}ms`:"",e.style.animationDelay=r.delay?`${r.delay}ms`:"")};return(0,e.useEffect)((()=>{if(!a?.entranceAnimation?.animation?.[s])return;let e=document.querySelector(`.${c} .pbg-content-wrap`),n=null,t=document.querySelector('iframe[name="editor-canvas"]');if(e)u(e);else if(t&&t.contentDocument?.body?.childNodes?.length){const n=t.contentDocument.body;n&&0!==n?.childNodes?.length&&(e=n.querySelector(`.${c} .pbg-content-wrap`),u(e))}else n=setInterval((()=>{if(t=document.querySelector('iframe[name="editor-canvas"]'),t){const a=t.contentDocument.body;a&&0!==a?.childNodes?.length&&(clearInterval(n),e=a.querySelector(`.${c} .pbg-content-wrap`),u(e))}}),200)}),[i,r,s]),(0,e.createElement)(n,{...t,className:a?.entranceAnimation?.animation?.[s]})}));(0,t.addFilter)("pbg.BlockContent","pbg/entrance-pbg-block-content",m,10);const p=window.wp.element,d=window.wp.blockEditor,g=(0,a.createHigherOrderComponent)((n=>t=>{const a=(0,l.hasBlockSupport)(t.name,"customClassName",!0);if(!PremiumAnimation.allBlocks||i(t.name)||!a)return(0,e.createElement)(n,{...t});const{attributes:r,setAttributes:c,isSelected:s,clientId:b}=t,{entranceAnimation:m={},className:g}=r,v=(0,o.useSelect)((e=>{const{__experimentalGetPreviewDeviceType:n=null}=e("core/edit-post");return n?n():"Desktop"}),[]),h=e=>{e&&r?.entranceAnimation?.animation?.[v]&&((e=>{e?.classList?.length&&[...e.classList].forEach((n=>{n.startsWith("pbg-")&&!n.startsWith("pbg-animation-")&&e.classList.remove(n)}))})(e),e.classList.add("pbg-entrance-animation"),e.classList.add(`${r.entranceAnimation.animation[v]}`),e.style.animationTimingFunction=m.curve,e.style.animationDuration=m.duration?`${m.duration}ms`:"",e.style.animationDelay=m.delay?`${m.delay}ms`:"")};return(0,p.useEffect)((()=>{let e=document.querySelector(`#block-${b}`),n=null,t=document.querySelector('iframe[name="editor-canvas"]');if(e)h(e);else if(t&&t.contentDocument?.body?.childNodes?.length){const n=t.contentDocument.body;n&&0!==n?.childNodes?.length&&(e=n.querySelector(`#block-${b}`),h(e))}else n=setInterval((()=>{if(t=document.querySelector('iframe[name="editor-canvas"]'),t){const a=t.contentDocument.body;a&&0!==a?.childNodes?.length&&(clearInterval(n),e=a.querySelector(`#block-${b}`),h(e))}}),200)}),[m,v]),(0,e.createElement)(p.Fragment,null,(0,e.createElement)(n,{...t}),(0,e.createElement)(d.InspectorControls,null,(0,e.createElement)(u,{value:m,deviceType:v,onChange:e=>c({entranceAnimation:e})})))}),"EntranceAnimationControl");(0,t.addFilter)("editor.BlockEdit","pbg/entrance-animation-attribute",g),(0,t.addFilter)("blocks.registerBlockType","pbg/entrance-animation-attribute",((e,n)=>PremiumAnimation.allBlocks||i(n)?(void 0!==e.attributes&&(e.attributes=Object.assign(e.attributes,{entranceAnimation:{type:"object",default:r}})),e):e));const v=(0,a.createHigherOrderComponent)((n=>t=>{const a=(0,l.hasBlockSupport)(t.name,"customClassName",!0),{attributes:r,setAttributes:c,clientId:s}=t,{entranceAnimation:u={},className:b=""}=r,{animation:m}=u,p=(0,o.useSelect)((e=>{const{__experimentalGetPreviewDeviceType:n=null}=e("core/edit-post");return n?n():"Desktop"}),[]);return(0,e.useEffect)((()=>{const e=s.split("-")[4],n=b.replace(/pbg-animation-[a-zA-Z0-9]+/g,"")?.trim();(PremiumAnimation.allBlocks||i(t.name))&&a&&r?.entranceAnimation?.animation?.[p]?(c({className:""!==n?`${n} pbg-animation-${e}`:`pbg-animation-${e}`}),c({entranceAnimation:{...u,clientId:e}})):c({className:n})}),[m]),(0,e.createElement)(n,{...t})}),"withClientId");(0,t.addFilter)("editor.BlockEdit","pbg/entrance-animation-client-id",v)})();